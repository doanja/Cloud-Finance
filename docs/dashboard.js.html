<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: dashboard.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: dashboard.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * function to render the user's total expenses per category vs. goal as a graph
 * @param {number} userId the user's id
 */
const getCategorySum = userId => {
  // handle to the canvas
  const canvas1 = $('#chart1')[0].getContext('2d');
  const canvas2 = $('#chart2')[0].getContext('2d');
  const canvas3 = $('#chart3')[0].getContext('2d');
  const canvas4 = $('#chart4')[0].getContext('2d');
  const canvas5 = $('#chart5')[0].getContext('2d');
  const canvas6 = $('#chart6')[0].getContext('2d');

  const labels = [];

  const expenseTotals = {
    label: 'Actual Dollars Spent',
    data: [],
    backgroundColor: '#6272a4'
  };

  const categoryGoals = {
    label: 'Goal Dollar Amount',
    data: [],
    backgroundColor: '#44475'
  };

  axios.get(`/api/category/all/${userId}`).then(res => {
    console.log('res.data :', res.data);

    if (res.data.length === 0) {
      renderCardtitle('No data found. Click here to add expenses.', userId);
      return;
    }

    // for each category...
    res.data.forEach(category => {
      let categoryTotal = 0; // counter for category total (sum of all expenses)

      // calculate the sum of expenses for each category
      category.Expenses.forEach(expense => {
        categoryTotal += parseFloat(expense.amount);
      });

      // add data to the arrays
      labels.push(category.name); // name of each category
      categoryGoals.data.push(category.goal); // goals
      expenseTotals.data.push(parseFloat(categoryTotal.toFixed(2))); // category totals
    });

    // create dataset object
    const dataset = {
      labels,
      datasets: [expenseTotals, categoryGoals]
    };

    // render the chart
    renderChart(canvas1, 'bar', dataset);
    renderChart(canvas2, 'line', dataset);
    renderChart(canvas3, 'radar', dataset);
    renderChart(canvas4, 'horizontalBar', dataset);
    renderChart(canvas5, 'doughnut', dataset);
    renderChart(canvas6, 'polarArea', dataset);
  }),
    err => {
      console.log(err);
    };
};

/**
 *
 * @param {object} canvas the canvas object (dom element)
 * @param {string} chartType the type of chart to be rendered
 * @param {object} data the data to be rendered
 */
const renderChart = (canvas, chartType, data) => {
  const chart = new Chart(canvas, {
    type: chartType,
    data,
    options: {}
  });
};

const renderCardtitle = (titleText, userId) => {
  const title = $('&lt;a>', {
    class: 'card-title text-center my-auto',
    href: `/expenses/${userId}`
  }).text(titleText);

  $('.dashboard-card').empty();
  $('.dashboard-card').prepend(title);
};

$(document).ready(() => {
  const userId = parseInt(
    window.location.href.split('/')[window.location.href.split('/').length - 1]
  );

  getCategorySum(userId);
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#deleteCategory">deleteCategory</a></li><li><a href="global.html#deleteExpense">deleteExpense</a></li><li><a href="global.html#getBudgetCategories">getBudgetCategories</a></li><li><a href="global.html#getBudgetCategoriesTotals">getBudgetCategoriesTotals</a></li><li><a href="global.html#getCategories">getCategories</a></li><li><a href="global.html#getCategoriesAll">getCategoriesAll</a></li><li><a href="global.html#getCategorySum">getCategorySum</a></li><li><a href="global.html#getIncome">getIncome</a></li><li><a href="global.html#getRemainder">getRemainder</a></li><li><a href="global.html#getUserInfo">getUserInfo</a></li><li><a href="global.html#listenForModalSubmission">listenForModalSubmission</a></li><li><a href="global.html#parseFormData">parseFormData</a></li><li><a href="global.html#postCategory">postCategory</a></li><li><a href="global.html#postExpense">postExpense</a></li><li><a href="global.html#renderCategoryRow">renderCategoryRow</a></li><li><a href="global.html#renderChart">renderChart</a></li><li><a href="global.html#renderConfirmationModal">renderConfirmationModal</a></li><li><a href="global.html#renderDivider">renderDivider</a></li><li><a href="global.html#renderDropdown">renderDropdown</a></li><li><a href="global.html#renderDropdownCategories">renderDropdownCategories</a></li><li><a href="global.html#renderExpenseRow">renderExpenseRow</a></li><li><a href="global.html#renderIncome">renderIncome</a></li><li><a href="global.html#renderModal">renderModal</a></li><li><a href="global.html#renderModalContent">renderModalContent</a></li><li><a href="global.html#renderModalFormFields">renderModalFormFields</a></li><li><a href="global.html#renderNavLinks">renderNavLinks</a></li><li><a href="global.html#renderRemainderRow">renderRemainderRow</a></li><li><a href="global.html#renderSettingsLink">renderSettingsLink</a></li><li><a href="global.html#renderTotalExpenses">renderTotalExpenses</a></li><li><a href="global.html#renderTotals">renderTotals</a></li><li><a href="global.html#updateCategory">updateCategory</a></li><li><a href="global.html#updateExpense">updateExpense</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#updateUserIncome">updateUserIncome</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Dec 25 2019 16:35:43 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
